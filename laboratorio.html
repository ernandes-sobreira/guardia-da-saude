<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Guardi√£s da Vigil√¢ncia üß¨ | M√≥dulo 3 ‚Äî Laborat√≥rio</title>
  <meta name="theme-color" content="#ec4899"/>

  <style>
    :root{
      --bg0:#fff7fb;
      --bg1:#ffe4f2;
      --card: rgba(255,255,255,.86);
      --stroke: rgba(120,20,80,.15);

      --txt:#3b0a2a;
      --muted: rgba(59,10,42,.65);

      --pink:#ec4899;
      --violet:#8b5cf6;
      --teal:#06b6d4;
      --green:#22c55e;
      --gold:#f59e0b;

      --r:20px;
      --shadow: 0 18px 60px rgba(120,20,80,.18);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      /* garante que o conte√∫do n√£o fique escondido atr√°s do menu autom√°tico */
      padding-bottom: 150px;

      background:
        radial-gradient(900px 600px at 10% 0%, rgba(236,72,153,.18), transparent 55%),
        radial-gradient(800px 600px at 90% 10%, rgba(139,92,246,.18), transparent 55%),
        linear-gradient(180deg,var(--bg0),var(--bg1));
      color:var(--txt);
    }
    a{color:var(--pink); font-weight:800}

    /* Header */
    header{
      position:sticky; top:0; z-index:30;
      background: rgba(255,247,251,.90);
      backdrop-filter: blur(10px);
      border-bottom:1px solid var(--stroke);
    }
    .header{
      max-width:1100px;
      margin:auto;
      padding:14px 16px;
      display:flex;
      gap:12px;
      align-items:center;
    }
    .logo{
      width:46px;height:46px;
      border-radius:18px;
      display:grid;place-items:center;
      background:linear-gradient(135deg,var(--pink),var(--violet));
      color:white;
      font-size:22px;
      box-shadow:var(--shadow);
      flex:0 0 auto;
    }
    .header h1{ margin:0; font-size:16px; }
    .header p{
      margin:2px 0 0;
      font-size:12px;
      color:var(--muted);
    }

    /* Layout */
    main{
      max-width:1100px;
      margin:auto;
      padding:16px 16px 24px;
      display:grid;
      grid-template-columns: 340px 1fr;
      gap:14px;
    }
    @media(max-width:900px){
      main{grid-template-columns:1fr}
    }

    /* Panels */
    .panel{
      background:var(--card);
      border:1px solid var(--stroke);
      border-radius:var(--r);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .ph{
      padding:14px;
      border-bottom:1px solid var(--stroke);
    }
    .pb{ padding:12px; }
    .panel h2{ font-size:14px; margin:0; }

    /* Menu esquerdo */
    .lesson-btn{
      width:100%;
      text-align:left;
      padding:12px;
      margin-bottom:8px;
      border-radius:16px;
      border:1px solid transparent;
      background:rgba(255,255,255,.72);
      cursor:pointer;
      transition: transform .06s ease;
    }
    .lesson-btn:active{transform:scale(.99)}
    .lesson-btn.active{
      border-color:var(--pink);
      background:rgba(236,72,153,.12);
    }
    .lesson-btn b{display:block;font-size:13px}
    .lesson-btn span{font-size:12px;color:var(--muted)}

    /* Conte√∫do */
    .content{
      padding:16px;
      line-height:1.75;
    }
    .content h3{margin:14px 0 8px}
    .content ul{margin:8px 0 14px}
    .callout{
      background:rgba(236,72,153,.08);
      border-left:4px solid var(--pink);
      padding:12px;
      border-radius:14px;
      margin:12px 0;
    }
    .meta{
      background:rgba(6,182,212,.08);
      border-left:4px solid var(--teal);
      padding:12px;
      border-radius:14px;
      margin:12px 0;
    }
    .warn{
      background:rgba(245,158,11,.12);
      border-left:4px solid var(--gold);
      padding:12px;
      border-radius:14px;
      margin:12px 0;
    }

    /* checklist + notas */
    .check{
      display:flex;
      gap:10px;
      margin:10px 0;
      align-items:flex-start;
      padding:10px 10px;
      border:1px dashed rgba(120,20,80,.18);
      border-radius:14px;
      background:rgba(255,255,255,.6);
    }
    .check input{ transform: translateY(2px); }
    textarea{
      width:100%;
      min-height:160px;
      border-radius:14px;
      border:1px solid var(--stroke);
      padding:10px;
      margin-top:10px;
      background:rgba(255,255,255,.78);
      color:var(--txt);
      outline:none;
    }

    .tools{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin:12px 0 0;
    }
    .btn{
      border:0;
      cursor:pointer;
      padding:10px 12px;
      border-radius:14px;
      font-weight:900;
      background:rgba(255,255,255,.78);
      border:1px solid var(--stroke);
      color:var(--txt);
    }
    .btn.primary{
      background:linear-gradient(135deg,var(--pink),var(--violet));
      color:white;
      border-color:transparent;
    }
    .hint{
      font-size:12px;
      color:var(--muted);
      margin-top:10px;
    }
  </style>
</head>

<body>

<header>
  <div class="header">
    <div class="logo">üß¨</div>
    <div>
      <h1>M√≥dulo 3 ‚Äî Laborat√≥rio (8h)</h1>
      <p>Do campo ao microsc√≥pio: ci√™ncia feita por meninas</p>
    </div>
  </div>
</header>

<main>

  <!-- ESQUERDA -->
  <aside class="panel">
    <div class="ph">
      <h2>üî¨ Esta√ß√µes do Laborat√≥rio</h2>
      <p class="hint">Toque em uma esta√ß√£o para abrir. Tudo salva automaticamente.</p>
    </div>
    <div class="pb" id="menu"></div>
  </aside>

  <!-- DIREITA -->
  <section class="panel">
    <div class="ph">
      <h2 id="title">Escolha uma esta√ß√£o</h2>
      <p id="subtitle" style="font-size:12px;color:var(--muted);margin:6px 0 0"></p>
    </div>
    <div class="content" id="content">
      <div class="callout">
        <b>Como usar</b>
        <p style="margin:6px 0 0">
          1) Abra a esta√ß√£o ‚Üí 2) Leia os blocos ‚Üí 3) Marque o checklist ‚Üí 4) Escreva sua nota.
          <br/>O site salva automaticamente no seu celular.
        </p>
      </div>
    </div>
  </section>

</main>

<script>
  const STORAGE_PREFIX = "gv_lab_v1__";

  const lessons = [
    {
      id:"L1",
      title:"Esta√ß√£o 1 ‚Äî Chegada do material ao laborat√≥rio",
      sub:"Organiza√ß√£o, biosseguran√ßa e respeito ao material",
      html:`
        <h3>Objetivo da esta√ß√£o</h3>
        <p>Transformar o material do campo em <b>amostra confi√°vel</b> para observa√ß√£o. Aqui, a regra √©:
        <b>sem organiza√ß√£o n√£o existe dado</b>.</p>

        <div class="meta">
          <b>Biosseguran√ßa (linguagem simples)</b>
          <ul>
            <li>Luvas quando indicado ‚Ä¢ cabelo preso ‚Ä¢ bancada limpa</li>
            <li>Nada de comida/bebida no laborat√≥rio</li>
            <li>N√£o encostar no rosto durante a atividade</li>
            <li>Descarte correto (lixo comum vs. perfurocortante, se houver)</li>
          </ul>
        </div>

        <h3>Checklist (marque no app)</h3>
        ${mkChecks("L1",[
          "Conferi se cada frasco/saco tem etiqueta m√≠nima (local + data + coletor).",
          "Separei amostras por tipo (larva / adulto / √°gua / substrato) sem misturar.",
          "Organizei a bancada com uma √°rea ‚Äúlimpa‚Äù e uma √°rea ‚Äúsuja‚Äù.",
          "Registrei o que chegou (quantidade, condi√ß√£o, problemas)."
        ])}

        <h3>Minha nota (o que eu aprendi?)</h3>
        ${mkNote("L1","Escreva com suas palavras por que a biosseguran√ßa e a organiza√ß√£o protegem a ci√™ncia e as pessoas...")}

        <div class="callout">
          <b>Link √∫til</b>
          <p style="margin:6px 0 0">
            Biblioteca Virtual em Sa√∫de (Minist√©rio da Sa√∫de): 
            <a href="https://bvsms.saude.gov.br/" target="_blank" rel="noopener">bvsms.saude.gov.br</a>
          </p>
        </div>
      `
    },
    {
      id:"L2",
      title:"Esta√ß√£o 2 ‚Äî Rotulagem e registro cient√≠fico",
      sub:"Nomear, identificar e n√£o misturar informa√ß√µes",
      html:`
        <h3>Regra de ouro</h3>
        <p>Uma amostra sem informa√ß√£o vira ‚Äúcoisa‚Äù. Uma amostra bem rotulada vira <b>evid√™ncia</b>.</p>

        <div class="callout">
          <b>R√≥tulo m√≠nimo (sempre)</b>
          <ul>
            <li><b>C√≥digo</b> da amostra</li>
            <li><b>Local</b> (ex.: bairro + ponto)</li>
            <li><b>Data</b> e <b>hora</b></li>
            <li><b>Tipo</b> (larva/adulto/armadilha/recipiente)</li>
            <li><b>Quem coletou</b></li>
          </ul>
        </div>

        <h3>Checklist</h3>
        ${mkChecks("L2",[
          "Criei um c√≥digo √∫nico para cada amostra (ex.: GV-2025-01).",
          "Consegui explicar a diferen√ßa entre ‚Äúr√≥tulo‚Äù e ‚Äúregistro no caderno/planilha‚Äù.",
          "N√£o deixei duas amostras com o mesmo c√≥digo.",
          "Separei amostras duvidosas (sem dados) para n√£o contaminar o estudo."
        ])}

        <h3>Minha nota</h3>
        ${mkNote("L2","Crie aqui um exemplo de r√≥tulo completo para uma amostra fict√≠cia do campo...")}
      `
    },
    {
      id:"L3",
      title:"Esta√ß√£o 3 ‚Äî Observa√ß√£o em lupa e microsc√≥pio",
      sub:"Ver detalhes invis√≠veis a olho nu",
      html:`
        <h3>O que a lupa / microsc√≥pio revela?</h3>
        <p>Partes do corpo e formas (segmentos, asas, antenas) ajudam a reconhecer
        o <b>grupo</b> do inseto e entender o risco.</p>

        <div class="meta">
          <b>N√£o precisa ‚Äúdecorar esp√©cie‚Äù</b>
          <p style="margin:6px 0 0">
            Nesta oficina, o foco √©: <b>grupo + ambiente + evid√™ncia</b>.
            Isso j√° ajuda a tomar decis√µes melhores.
          </p>
        </div>

        <h3>Checklist</h3>
        ${mkChecks("L3",[
          "Consegui descrever pelo menos 3 caracter√≠sticas observ√°veis (ex.: forma do corpo, movimentos, tamanho).",
          "Diferenciei ‚Äúlarva‚Äù de ‚Äúadulto‚Äù pelo que vi (sem chute).",
          "Registrei um desenho simples ou descri√ß√£o do que observei (no meu caderno e aqui).",
          "Evitei tocar na amostra sem necessidade e mantive tudo organizado."
        ])}

        <h3>Minha nota</h3>
        ${mkNote("L3","Descreva o que voc√™ viu e por que isso pode ajudar a vigil√¢ncia em sa√∫de...")}
      `
    },
    {
      id:"L4",
      title:"Esta√ß√£o 4 ‚Äî Do dado √† decis√£o",
      sub:"Como a vigil√¢ncia usa o que voc√™ observou",
      html:`
        <h3>O dado vira a√ß√£o</h3>
        <ul>
          <li>Orienta√ß√£o √† comunidade (com respeito e sem culpa)</li>
          <li>Identifica√ß√£o de √°reas priorit√°rias</li>
          <li>Monitoramento ao longo do tempo</li>
          <li>Apoio a campanhas educativas e manejo ambiental</li>
        </ul>

        <div class="callout">
          <b>Pergunta poderosa</b>
          <p style="margin:6px 0 0">
            ‚ÄúSe eu fosse a vigil√¢ncia municipal, o que eu faria primeiro com esses achados?‚Äù
          </p>
        </div>

        <h3>Checklist</h3>
        ${mkChecks("L4",[
          "Consegui ligar ambiente ‚Üí vetor ‚Üí doen√ßa em uma frase simples.",
          "Entendi que nem tudo se ‚Äúelimina‚Äù: √†s vezes se maneja ou monitora.",
          "Consegui sugerir uma a√ß√£o pr√°tica que caiba na realidade do bairro.",
          "Consigo explicar para outra pessoa o porqu√™ do laborat√≥rio."
        ])}

        <h3>Minha nota</h3>
        ${mkNote("L4","Escreva 3 decis√µes poss√≠veis a partir do que foi observado no campo e no laborat√≥rio...")}
      `
    },
    {
      id:"L5",
      title:"Esta√ß√£o 5 ‚Äî Encerramento: mulheres na ci√™ncia e na sa√∫de",
      sub:"Voc√™ tamb√©m pode estar aqui",
      html:`
        <h3>Ci√™ncia √© lugar de mulher</h3>
        <p>Mulheres est√£o na pesquisa, na gest√£o, na inova√ß√£o e na sa√∫de p√∫blica.
        E precisamos de mais meninas ocupando esses espa√ßos com confian√ßa.</p>

        <div class="callout">
          <b>Mensagem final</b>
          <p style="margin:6px 0 0">Ser cientista √© observar, cuidar e transformar.</p>
        </div>

        <h3>Checklist</h3>
        ${mkChecks("L5",[
          "Consigo dizer o que eu aprendi em 2 frases.",
          "Consigo explicar por que vigil√¢ncia salva vidas.",
          "Consigo imaginar um caminho para seguir na ci√™ncia/sa√∫de.",
          "Eu me sinto mais forte e capaz depois do curso."
        ])}

        <h3>Minha nota</h3>
        ${mkNote("L5","Escreva uma promessa: o que voc√™ vai levar para sua casa/escola/comunidade?")}
      `
    }
  ];

  function mkChecks(lessonId, items){
    return `
      <div class="checklist" data-lesson="${lessonId}">
        ${items.map((t,i)=>`
          <label class="check">
            <input type="checkbox" data-save="1" data-key="${lessonId}__ck${i}">
            <div>${t}</div>
          </label>
        `).join("")}
        <div class="tools">
          <button class="btn primary" type="button" data-action="save" data-lesson="${lessonId}">üíæ Salvar agora</button>
          <button class="btn" type="button" data-action="clear" data-lesson="${lessonId}">üßπ Limpar esta esta√ß√£o</button>
        </div>
      </div>
    `;
  }

  function mkNote(lessonId, placeholder){
    return `
      <textarea data-save="1" data-key="${lessonId}__note" placeholder="${placeholder}"></textarea>
      <div class="hint">‚úÖ Salva automaticamente conforme voc√™ digita.</div>
    `;
  }

  const menu = document.getElementById("menu");
  const title = document.getElementById("title");
  const subtitle = document.getElementById("subtitle");
  const content = document.getElementById("content");

  function storageKey(k){ return STORAGE_PREFIX + k; }

  function restoreAll(){
    document.querySelectorAll('[data-save="1"]').forEach(el=>{
      const k = el.getAttribute("data-key");
      const v = localStorage.getItem(storageKey(k));
      if (v === null) return;
      if (el.type === "checkbox") el.checked = (v === "1");
      else el.value = v;
    });
  }

  function attachAutosave(){
    document.querySelectorAll('[data-save="1"]').forEach(el=>{
      const k = el.getAttribute("data-key");
      const handler = ()=>{
        if (el.type === "checkbox") localStorage.setItem(storageKey(k), el.checked ? "1" : "0");
        else localStorage.setItem(storageKey(k), el.value || "");
      };
      el.addEventListener("input", handler);
      el.addEventListener("change", handler);
    });

    // bot√µes de salvar / limpar
    document.querySelectorAll('[data-action="save"]').forEach(btn=>{
      btn.addEventListener("click", ()=>{
        restoreAll(); // s√≥ para garantir que nada ficou fora (visual)
        alert("‚úÖ Salvo no seu celular!");
      });
    });

    document.querySelectorAll('[data-action="clear"]').forEach(btn=>{
      btn.addEventListener("click", ()=>{
        const lessonId = btn.getAttribute("data-lesson");
        if (!confirm("Quer limpar apenas esta esta√ß√£o?")) return;

        // apaga chaves daquela esta√ß√£o
        Object.keys(localStorage).forEach(k=>{
          if (k.startsWith(STORAGE_PREFIX + lessonId + "__")) localStorage.removeItem(k);
        });

        // limpa tela
        document.querySelectorAll(`[data-key^="${lessonId}__"]`).forEach(el=>{
          if (el.type === "checkbox") el.checked = false;
          else el.value = "";
        });

        alert("üßπ Esta√ß√£o limpa!");
      });
    });
  }

  function openLesson(l, btn){
    document.querySelectorAll(".lesson-btn").forEach(x=>x.classList.remove("active"));
    btn.classList.add("active");
    title.textContent = l.title;
    subtitle.textContent = l.sub;
    content.innerHTML = l.html;

    // reanexa autosave na tela nova e restaura valores
    restoreAll();
    attachAutosave();

    // no mobile, volta pro topo
    if (window.innerWidth < 900) window.scrollTo({top:0, behavior:"smooth"});
  }

  lessons.forEach((l,idx)=>{
    const b=document.createElement("button");
    b.className="lesson-btn";
    b.type="button";
    b.innerHTML=`<b>${l.title}</b><span>${l.sub}</span>`;
    b.addEventListener("click", ()=>openLesson(l,b));
    menu.appendChild(b);
    if (idx===0) setTimeout(()=>openLesson(l,b), 0);
  });
</script>

<!-- Menu autom√°tico (sem nav manual aqui) -->
<div id="app-menu"></div>
<script src="menu.js"></script>
  <script src="caderno-global.js"></script>


</body>
</html>
